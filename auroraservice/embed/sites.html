<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" type="text/css" href="https://liveg-technologies.github.io/auroraservice/borealis.css">
		<link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
		<script src="https://www.gstatic.com/firebasejs/4.12.0/firebase.js"></script>
		<script src="https://liveg-technologies.github.io/auroraservice/bappapi.js"></script>
		<script defer="" src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
		<style>
			body {
				font-size: 20px;
				text-align: left;
			}

			#header {
				text-align: center;
			}

			#buttons {
				display: none;
			}

			button {
				width: unset;
			}

			hr {
				display: block;
				height: 0px;
				border: 0;
				border-top: 5px solid #888888;
				padding: 0; 
			}
		</style>
	</head>
	<body>
		<div id="buttons">
			<button><i class="fas fa-plus"></i> Add</button>
			<hr>
		</div>
		<div id="content">
			<h1 id="header">Please wait...</h1>
		</div>
	</body>
	<script>
		app.load("Webcount", "webcount");

		function selectSite(key) {
			app.write("selected", key);
		}

        app.onLoginChange(function(loggedIn) {
            if (setup.loggedIn == true) {
				document.getElementById("buttons").style.display = "unset";

				app.readOnChange("selected", function(siteInfo) {
					app.readListOnChange("sites", function(data, key) {
						if (key == siteInfo) {
                			document.getElementById("content").innerHTML += "<div style='width: calc(100% - 100px); float: left;'>" +  data.name + " <em style='color: #888888;'>Selected</em></div><button class='bad' style='width: 80px; position: relative; top: -5px; padding: 5px;' onclick='deleteSite(\"" + key + "\");'><i class='fas fa-times'></i> Delete</button>";
						} else {
							document.getElementById("content").innerHTML += "<div style='width: calc(100% - 100px); float: left;'><a href='javascript:void(0);' onclick='selectSite(\"" + key + "\")'>" + data.name + "</a></div><button class='bad' style='width: 80px; position: relative; top: -5px; padding: 5px;' onclick='deleteSite(\"" + key + "\");'><i class='fas fa-times'></i> Delete</button>";
						}
					}, function(data) {
						document.getElementById("content").innerHTML = "";
					});
				});
            } else {
                document.getElementById("content").innerHTML = "<h1>You aren't logged in. Please log in on the 'Account' page.</h1>";
            }
        });
	</script>
</html>